<div class="header-title-com container-fluid gradient-bg">
    <div class="row">

        <a href="../Admin/dashboard"><i class="fas fa-home i_test "></i></a>
        <a href="../Admin/PatientList" class="title-heding-col">
            <h6>Patient List</h6>
        </a> <i class="fas fa-chevron-right i_test "></i> <span style="padding: 7px 18px 0;"> Add Patient</span>



    </div>
</div>
<div style="padding: 0 9px;">
    <div class="card card-custom content d-flex flex-column flex-column-fluid" style="height: auto;">
        <div class="card-body">
            <form autocomplete="off" [formGroup]="Patient" class="form" #formDirective="ngForm">


                <mat-card style="box-shadow: none; padding: 5px;">

                    <mat-card-content>
                        <mat-tab-group #allTabs class="demo-tab-group">
                            <!--Patient Details start-->
                            <mat-tab label="Patient Details">
                                <div class="row" style="margin: 0px; padding: 0px; ">
                                    <div class="col-md-8">
                                        <div class="border" style=" padding-left: 13px; ">
                                            <div class="form-group row" style="padding: 5px;">
                                                <mat-form-field class="col-md-2">
                                                    <input type="text" (keypress)="($event.charCode >= 48 && $event.charCode <= 58)" (change)="getPatientByMobileNo($event.target.value)" (input)="MobileNo(true)" placeholder="Mobile No *" matInput [formControl]="PATIENT_Telno" [matAutocomplete]="auto2Mobile"
                                                        minlength="10" maxlength="10">
                                                    <mat-autocomplete (optionSelected)="getPatientByMobileNo($event.option.value)" #auto2Mobile="matAutocomplete">
                                                        <mat-option *ngFor="let option of MobileNoList | async" [value]="option.PATIENT_Telno">
                                                            {{option.PATIENT_Telno}}
                                                        </mat-option>
                                                    </mat-autocomplete>
                                                    <mat-error *ngIf="Patient.invalid">Enter Mobile No</mat-error>
                                                </mat-form-field>

                                                <mat-form-field *ngIf="PATIENT_Name_Select_Enable" class="col-md-4">
                                                    <mat-label>Select Patient</mat-label>
                                                    <mat-select (selectionChange)="SelectedPatient($event.value)">
                                                        <mat-option *ngFor="let Patient of ListOfPatientToSelect" [value]="Patient.Patient_Id">
                                                            {{Patient.PATIENT_Name}} -- {{Patient.PATIENT_Date | date:'medium'}}
                                                        </mat-option>
                                                    </mat-select>
                                                </mat-form-field>
                                                <mat-form-field *ngIf="PATIENT_Name_Enable" class="col-md-4">
                                                    <input placeholder="Patient Name  *" matInput formControlName="PATIENT_Name">
                                                    <mat-error *ngIf="Patient.invalid">Enter Patient Name</mat-error>
                                                </mat-form-field>

                                                <a (click)="NewPatient();" *ngIf="PATIENT_Name_Select_Enable2" class="btn btn-sm"> <i class="fa fa-plus"></i> Add New</a>
                                                <div class="col-md-3">
                                                    <mat-label> Registration Date *</mat-label>
                                                    <kendo-datetimepicker [format]="format" [(value)]="PATIENT_Date">
                                                    </kendo-datetimepicker>

                                                </div>

                                                <mat-form-field class="col-md-3">
                                                   <b><input placeholder="Lab No" matInput disabled [value]="this.Patient.controls['LabNo'].value"></b> 
                                                </mat-form-field>

                                            </div>
                                            <div class="form-group row">
                                                <mat-form-field class="col-md-2">
                                                    <mat-label>Gender</mat-label>
                                                    <mat-select [(value)]="SelectedGender" formControlName="PATIENT_Gender">
                                                        <mat-option value="Male">
                                                            Male
                                                        </mat-option>
                                                        <mat-option value="Female">
                                                            Female
                                                        </mat-option>
                                                        <mat-option value="Transgender">
                                                            Transgender
                                                        </mat-option>
                                                    </mat-select>
                                                    <mat-error *ngIf="Patient.invalid">Select Patient Gender
                                                    </mat-error>
                                                </mat-form-field>
                                                <mat-form-field class="col-md-2">
                                                    <mat-label>Date of Birth</mat-label>
                                                    <input (dateInput)="onDOBChanged($event.target.value._d)" matInput formControlName="PATIENT_DOB" [matDatepicker]="picker">
                                                    <mat-datepicker-toggle matSuffix [for]="picker">
                                                    </mat-datepicker-toggle>
                                                    <mat-datepicker #picker></mat-datepicker>
                                                </mat-form-field>

                                                <div class="col-sm-3">
                                                    <div class="row">
                                                        <mat-form-field class="col-md-3">
                                                            <input placeholder="Age YY" matInput [formControl]="PatientYear">
                                                        </mat-form-field>
                                                        <mat-form-field class="col-md-3">
                                                            <input placeholder="Age MM" matInput [formControl]="PatientMonth">
                                                        </mat-form-field>
                                                        <mat-form-field class="col-md-3">
                                                            <input placeholder="Age DD" matInput [formControl]="PatientDay">
                                                        </mat-form-field>
                                                    </div>
                                                </div>

                                                <mat-form-field class="col-md-4">
                                                    <mat-label>Email</mat-label>
                                                    <!-- <input matInput formControlName="PATIENT_Email"> -->

                                                    <input type="text" matInput formControlName="PATIENT_Email" class="form-input-field" pattern="[a-zA-Z0-9.-_]{1,}@[a-zA-Z.-]{2,}[.]{1}[a-zA-Z]{2,}" />
                                                    <mat-error *ngIf="Patient.get('PATIENT_Email').hasError('required')">Email is required</mat-error>
                                                    <mat-error *ngIf="Patient.get('PATIENT_Email').hasError('email')">Please enter a valid email address
                                                    </mat-error>
                                                </mat-form-field>

                                            </div>

                                            <div class="form-group row">

                                                <mat-form-field appearance="fill" class="col-md-4 ">

                                                    <mat-label>Ref By Dr (1) *</mat-label>
                                                    <input type="text" (input)="getDoctorID('Doc1')" placeholder="Ref By Dr (1) *" matInput [formControl]="Doc1" [matAutocomplete]="auto">
                                                    <mat-autocomplete (optionSelected)="getDoctorID('Doc1')" #auto="matAutocomplete">
                                                        <mat-option *ngFor="let option of filteredOptions | async" [value]="option.DOCTOR_Name">
                                                            {{option.DOCTOR_Name}} --({{option.DOCTOR_Qualification}})
                                                        </mat-option>
                                                    </mat-autocomplete>

                                                    <mat-error *ngIf=" this.Doc1Id == null ||  this.Doc1Id == '' ||  this.Doc1Id == 0">Please Select Doctor
                                                    </mat-error>
                                                </mat-form-field>

                                                <mat-form-field appearance="fill" class="col-md-4 ">

                                                    <mat-label>Ref By Dr (2)</mat-label>
                                                    <input type="text" (input)="getDoctorID('Doc2')" placeholder="Ref By Dr (2)" matInput [formControl]="Doc2" [matAutocomplete]="auto2">
                                                    <mat-autocomplete (optionSelected)="getDoctorID('Doc2')" #auto2="matAutocomplete">
                                                        <mat-option *ngFor="let option2 of filteredOptions2 | async" [value]="option2.DOCTOR_Name">
                                                            {{option2.DOCTOR_Name}} --({{option2.DOCTOR_Qualification}})
                                                        </mat-option>
                                                    </mat-autocomplete>
                                                </mat-form-field>

                                                <div class=" mt-2 col-md-4">
                                                    <div class="checkbox-inline ">
                                                        <mat-checkbox class="example-margin" formControlName="Urgent">
                                                            Urgent Report
                                                        </mat-checkbox>
                                                    </div>
                                                    <div class="checkbox-inline ">
                                                        <mat-checkbox class="example-margin" formControlName="blnCommission">
                                                            Maintain Referral Fee
                                                        </mat-checkbox>
                                                    </div>
                                                    <div class="checkbox-inline ">
                                                        <mat-checkbox class="example-margin" formControlName="SendSMS">
                                                            Send Sms
                                                        </mat-checkbox>
                                                    </div>

                                                    <br/>


                                                </div>
                                                <div class="form-group row">
                                                    <mat-form-field appearance="fill" class="col-md-5">
                                                        <mat-label>Collection Center *</mat-label>
                                                        <input type="text" (change)="CollectionCenterChanegd()" (input)="CollectionCenterChanegd()" placeholder="Collection Center *" matInput [formControl]="CollectionCenter" [matAutocomplete]="Center">
                                                        <mat-autocomplete (optionSelected)="CollectionCenterChanegd()" #Center="matAutocomplete">
                                                            <mat-option *ngFor="let option of CollectionCenterList | async" [value]="option.CENTER_Name">
                                                                {{option.CENTER_Name}}
                                                            </mat-option>
                                                        </mat-autocomplete>
                                                        <mat-error *ngIf="CollectionCenter.invalid">Select Collection Center
                                                        </mat-error>
                                                    </mat-form-field>

                                                    <mat-form-field appearance="fill" class="col-md-3">
                                                        <mat-label>Doc Type</mat-label>
                                                        <mat-select formControlName="Patient_DocType">
                                                            <mat-option [value]="'Both'">
                                                                Both
                                                            </mat-option>
                                                            <mat-option [value]="'Soft Copy'">
                                                                Soft Copy
                                                            </mat-option>
                                                            <mat-option [value]="'Hard Copy'">
                                                                Hard Copy
                                                            </mat-option>
                                                        </mat-select>
                                                    </mat-form-field>

                                                    <div class="col-md-4">
                                                        <mat-label>Sample Date </mat-label>
                                                        <kendo-datetimepicker [format]="format" [(value)]="Sample_Date">
                                                        </kendo-datetimepicker>
                                                    </div>

                                                    <div class="col-md-4">
                                                        <mat-label>Upload file </mat-label>
                                                        <div class="uppy-Root uppy-FileInput-container">
                                                            <input type="file" #file placeholder="Choose file" (change)="uploadFile(file.files)">
                                                        </div>
                                                    </div>
                                                    <div class="col-md-4">
                                                        <mat-label>TPA</mat-label>

                                                        <mat-select formControlName="DropTPAList" class="form-group">
                                                            <mat-option *ngFor="let option of TPAList" [value]="option.Id">
                                                                {{option.Name}}
                                                            </mat-option>
                                                        </mat-select>

                                                    </div>
                                                    <div class="col-md-4">

                                                        <mat-label>Proposal Number</mat-label>
                                                        <input matInput formControlName="ProposalNumber">

                                                    </div>

                                                </div>




                                            </div>

                                        </div>

                                        <div class="border" style="margin-top: 5px;">
                                            <mat-card style="box-shadow: none;">
                                                <mat-card-content>
                                                    <mat-tab-group class="demo-tab-group">
                                                        <mat-tab label="Pathology">
                                                            <div class="demo-tab-content">
                                                                <!-- <div class="testTable"> -->
                                                                <div *ngIf="this.TestPythology[0]!=null" class="table table-responsive">
                                                                    <table class="table ">
                                                                        <thead>
                                                                            <tr>
                                                                                <th class="font-weight-bold align-text-top" scope="col " style="width: 60px;">Select</th>
                                                                                <th class="font-weight-bold align-text-top" scope="col ">
                                                                                    Test Name
                                                                                </th>
                                                                                <th class="font-weight-bold align-text-top" scope="col " style="width: 160px; padding: 0px;">
                                                                                    Rate
                                                                                </th>
                                                                                <!-- <th class="font-weight-bold align-text-top"
                                                                                scope="col ">
                                                                                Basic Rate
                                                                            </th>
                                                                            <th class="font-weight-bold align-text-top" scope="col ">
                                                                                Discount
                                                                            </th> -->
                                                                            </tr>
                                                                        </thead>
                                                                        <tbody>
                                                                            <tr *ngFor="let test of TestPythology">
                                                                                <th style="width: 60px;">
                                                                                    <label class="checkbox">
                                                                                    <input type="checkbox"
                                                                                        [ngModelOptions]="{standalone: true}"
                                                                                        [name]="test.Checked"
                                                                                        [(ngModel)]="test.SpecialTest"
                                                                                        (change)="onCheckBoxChange(test,$event.target.checked)">
                                                                                    <span
                                                                                        style="margin-right: 5px;"></span>
                                                                                </label>
                                                                                </th>
                                                                                <th>{{ test?.TESTMST_Name }}</th>

                                                                                <th style="width: 160px;">
                                                                                    {{test?.TestRate}}
                                                                                </th>

                                                                            </tr>
                                                                        </tbody>
                                                                    </table>

                                                                </div>
                                                                <!-- </div> -->
                                                                <h4 *ngIf="this.TestPythology[0]==null">No Data Available, Please Select Collection Center </h4>

                                                            </div>
                                                            <div class="row ml-1 mr-1 border-top">
                                                                <mat-form-field class="col-md-9 pb-0">
                                                                    <mat-label>Quick Search</mat-label>
                                                                    <input matInput (input)="SearchTestValueChanegd($event.target.value)" [formControl]="SearchListPythology">
                                                                </mat-form-field>

                                                            </div>


                                                        </mat-tab>
                                                        <mat-tab label="HistoPathology">
                                                            <div class="demo-tab-content">
                                                                <div *ngIf="this.TestHisto[0]!=null" class="table table-responsive">
                                                                    <table class="table ">
                                                                        <thead>
                                                                            <tr>
                                                                                <th class="font-weight-bold align-text-top" scope="col " style="width: 60px;">Select</th>
                                                                                <th class="font-weight-bold align-text-top" scope="col ">
                                                                                    Test Name
                                                                                </th>
                                                                                <th class="font-weight-bold align-text-top" scope="col " style="width: 160px; padding: 0px;">
                                                                                    Rate
                                                                                </th>
                                                                                <!-- <th class="font-weight-bold align-text-top"
                                                                                scope="col ">
                                                                                Basic Rate
                                                                            </th>
                                                                            <th class="font-weight-bold align-text-top" scope="col ">
                                                                                Discount
                                                                            </th> -->
                                                                            </tr>
                                                                        </thead>
                                                                        <tbody>
                                                                            <tr *ngFor="let test of TestHisto">
                                                                                <th style="width: 60px;">
                                                                                    <label class="checkbox">
                                                                                    <input type="checkbox"
                                                                                        [ngModelOptions]="{standalone: true}"
                                                                                        [name]="test.Checked"
                                                                                        [(ngModel)]="test.SpecialTest"
                                                                                        (change)="onCheckBoxChange(test,$event.target.checked)">
                                                                                    <span
                                                                                        style="margin-right: 5px;"></span>
                                                                                </label>
                                                                                </th>
                                                                                <th>{{ test?.TESTMST_Name }}</th>


                                                                                <th style="width: 160px;">
                                                                                    <!-- <input value="{{test?.TestRate}}"
                                                                                        (input)="ChangeTextBoxTestRate(test,$event.target.value)"
                                                                                        type="text"
                                                                                        class="form-control-sm form-control" /> -->
                                                                                    {{test?.TestRate}}
                                                                                </th>
                                                                                <!-- <th>
                                                                                <input value="{{test?.BaseRate}}"
                                                                                        (input)="ChangeTextBoxBaseRate(test,$event.target.value)"
                                                                                        type="text"
                                                                                        class="form-control-sm form-control" />  
                                                                                {{test?.BaseRate}}
                                                                            </th>
                                                                            <th>
                                                                                 <input value="{{test?.Discount}}"
                                                                                        (input)="ChangeTextBoxDiscount(test,$event.target.value)"
                                                                                        type="text"
                                                                                        class="form-control-sm form-control" />  
                                                                                {{test?.Discount}}
                                                                            </th> -->
                                                                            </tr>
                                                                        </tbody>
                                                                    </table>

                                                                </div>
                                                                <h4 *ngIf="this.TestHisto[0]==null">No Data Available, Please Select Collection Center </h4>

                                                            </div>
                                                            <div class="row ml-1 mr-1 pb-0  ">
                                                                <mat-form-field class="col-md-9 pb-0 h-25">
                                                                    <mat-label>Quick Search</mat-label>
                                                                    <input matInput (input)="SearchTestValueChanegd($event.target.value)" [formControl]="SearchListHisto">
                                                                </mat-form-field>

                                                            </div>
                                                        </mat-tab>
                                                        <mat-tab label="X - Ray">
                                                            <div class="demo-tab-content">
                                                                <div *ngIf="this.TestX_Ray[0]!=null" class="table table-responsive">
                                                                    <table class="table ">
                                                                        <thead>
                                                                            <tr>
                                                                                <th class="font-weight-bold align-text-top" scope="col " style="width: 60px;">Select</th>
                                                                                <th class="font-weight-bold align-text-top" scope="col ">
                                                                                    Test Name
                                                                                </th>
                                                                                <th class="font-weight-bold align-text-top" scope="col " style="width: 160px; padding: 0px;">
                                                                                    Rate
                                                                                </th>
                                                                                <!-- <th class="font-weight-bold align-text-top"
                                                                                scope="col ">
                                                                                Basic Rate
                                                                            </th>
                                                                            <th class="font-weight-bold align-text-top" scope="col ">
                                                                                Discount
                                                                            </th> -->
                                                                            </tr>
                                                                        </thead>
                                                                        <tbody>
                                                                            <tr *ngFor="let test of TestX_Ray">

                                                                                <th style="width: 60px;">
                                                                                    <label class="checkbox">
                                                                                    <input type="checkbox"
                                                                                        [ngModelOptions]="{standalone: true}"
                                                                                        [name]="test.Checked"
                                                                                        [(ngModel)]="test.SpecialTest"
                                                                                        (change)="onCheckBoxChange(test,$event.target.checked)">
                                                                                    <span
                                                                                        style="margin-right: 5px;"></span>
                                                                                </label>
                                                                                </th>
                                                                                <th>{{ test?.TESTMST_Name }}</th>

                                                                                <th style="width: 160px;">
                                                                                    <!-- <input value="{{test?.TestRate}}"
                                                                                        (input)="ChangeTextBoxTestRate(test,$event.target.value)"
                                                                                        type="text"
                                                                                        class="form-control-sm form-control" /> -->
                                                                                    {{test?.TestRate}}
                                                                                </th>
                                                                                <!--          <th>
                                                                           <input value="{{test?.BaseRate}}"
                                                                                        (input)="ChangeTextBoxBaseRate(test,$event.target.value)"
                                                                                        type="text"
                                                                                        class="form-control-sm form-control" /> 
                                                                                {{test?.BaseRate}}
                                                                            </th>
                                                                            <th>
                                                                                 <input value="{{test?.Discount}}"
                                                                                        (input)="ChangeTextBoxDiscount(test,$event.target.value)"
                                                                                        type="text"
                                                                                        class="form-control-sm form-control" /> 
                                                                                {{test?.Discount}}
                                                                            </th> -->
                                                                            </tr>
                                                                        </tbody>
                                                                    </table>
                                                                </div>
                                                                <h4 *ngIf="this.TestX_Ray[0]==null">No Data Available, Please Select Collection Center </h4>

                                                            </div>
                                                            <div class="row ml-1 mr-1   ">
                                                                <mat-form-field class="col-md-9 h-25">
                                                                    <mat-label>Quick Search</mat-label>
                                                                    <input matInput (input)="SearchTestValueChanegd($event.target.value)" [formControl]="SearchListX_Ray">
                                                                </mat-form-field>


                                                            </div>
                                                        </mat-tab>
                                                        <mat-tab label="Sonography">
                                                            <div class="demo-tab-content">
                                                                <div *ngIf="this.TestSono[0]!=null" class="table table-responsive">
                                                                    <table class="table ">
                                                                        <thead>
                                                                            <tr>
                                                                                <th class="font-weight-bold align-text-top" scope="col " style="width: 60px;">Select</th>
                                                                                <th class="font-weight-bold align-text-top" scope="col ">
                                                                                    Test Name
                                                                                </th>
                                                                                <th class="font-weight-bold align-text-top" scope="col " style="width: 160px; padding: 0px;">
                                                                                    Rate
                                                                                </th>
                                                                                <!-- <th class="font-weight-bold align-text-top"
                                                                                scope="col ">
                                                                                Basic Rate
                                                                            </th>
                                                                            <th class="font-weight-bold align-text-top" scope="col ">
                                                                                Discount
                                                                            </th> -->
                                                                            </tr>
                                                                        </thead>
                                                                        <tbody>
                                                                            <tr *ngFor="let test of TestSono">

                                                                                <th style="width: 60px;">
                                                                                    <label class="checkbox">
                                                                                    <input type="checkbox"
                                                                                        [ngModelOptions]="{standalone: true}"
                                                                                        [name]="test.Checked"
                                                                                        [(ngModel)]="test.SpecialTest"
                                                                                        (change)="onCheckBoxChange(test,$event.target.checked)">
                                                                                    <span
                                                                                        style="margin-right: 5px;"></span>
                                                                                </label>
                                                                                </th>
                                                                                <th>{{ test?.TESTMST_Name }}</th>

                                                                                <th style="width: 160px;">
                                                                                    <!-- <input value="{{test?.TestRate}}"
                                                                                        (input)="ChangeTextBoxTestRate(test,$event.target.value)"
                                                                                        type="text"
                                                                                        class="form-control-sm form-control" /> -->
                                                                                    {{test?.TestRate}}
                                                                                </th>
                                                                                <!-- <th>
                                                                               <input value="{{test?.BaseRate}}"
                                                                                        (input)="ChangeTextBoxBaseRate(test,$event.target.value)"
                                                                                        type="text"
                                                                                        class="form-control-sm form-control" />
                                                                                {{test?.BaseRate}}
                                                                            </th>
                                                                            <th>
                                                                               <input value="{{test?.Discount}}"
                                                                                        (input)="ChangeTextBoxDiscount(test,$event.target.value)"
                                                                                        type="text"
                                                                                        class="form-control-sm form-control" /> 
                                                                                {{test?.Discount}}
                                                                            </th> -->
                                                                            </tr>
                                                                        </tbody>
                                                                    </table>

                                                                </div>
                                                                <h4 *ngIf="this.TestSono[0]==null">No Data Available, Please Select Collection Center </h4>
                                                            </div>
                                                            <div class="row ml-1 mr-1   ">
                                                                <mat-form-field class="col-md-9 h-25">
                                                                    <mat-label>Quick Search</mat-label>
                                                                    <input matInput (input)="SearchTestValueChanegd($event.target.value)" [formControl]="SearchListSono">
                                                                </mat-form-field>

                                                            </div>
                                                        </mat-tab>
                                                        <mat-tab label="Profiles">
                                                            <div class="demo-tab-content">
                                                                <div *ngIf="this.TestProfiles[0]!=null" class="table table-responsive">
                                                                    <table class="table ">
                                                                        <thead>
                                                                            <tr>
                                                                                <th class="font-weight-bold align-text-top" scope="col " style="width: 60px;">Select</th>
                                                                                <th class="font-weight-bold align-text-top" scope="col ">
                                                                                    Test Name
                                                                                </th>
                                                                                <th class="font-weight-bold align-text-top" scope="col " style="width: 160px; padding: 0px;">
                                                                                    Rate
                                                                                </th>
                                                                                <!-- <th class="font-weight-bold align-text-top"
                                                                                scope="col ">
                                                                                Basic Rate
                                                                            </th>
                                                                            <th class="font-weight-bold align-text-top" scope="col ">
                                                                                Discount
                                                                            </th> -->
                                                                            </tr>
                                                                        </thead>
                                                                        <tbody>
                                                                            <tr *ngFor="let test of TestProfiles">

                                                                                <th style="width: 60px;">
                                                                                    <label class="checkbox">
                                                                                    <input type="checkbox"
                                                                                        [ngModelOptions]="{standalone: true}"
                                                                                        [name]="test.Checked"
                                                                                        [(ngModel)]="test.SpecialTest"
                                                                                        (change)="onCheckBoxChange(test,$event.target.checked)">
                                                                                    <span
                                                                                        style="margin-right: 5px;"></span>
                                                                                </label>
                                                                                </th>
                                                                                <th>{{ test?.TESTMST_Name }}</th>


                                                                                <th style="width: 160px;">
                                                                                    <!-- <input value="{{test?.TestRate}}"
                                                                                        (input)="ChangeTextBoxTestRate(test,$event.target.value)"
                                                                                        type="text"
                                                                                        class="form-control-sm form-control" /> -->
                                                                                    {{test?.TestRate}}
                                                                                </th>
                                                                                <!-- <th>
                                                                                 <input value="{{test?.BaseRate}}"
                                                                                        (input)="ChangeTextBoxBaseRate(test,$event.target.value)"
                                                                                        type="text"
                                                                                        class="form-control-sm form-control" />  
                                                                                {{test?.BaseRate}}
                                                                            </th>
                                                                            <th>
                                                                                  <input value="{{test?.Discount}}"
                                                                                        (input)="ChangeTextBoxDiscount(test,$event.target.value)"
                                                                                        type="text"
                                                                                        class="form-control-sm form-control" /> 
                                                                                {{test?.Discount}}
                                                                            </th> -->
                                                                            </tr>
                                                                        </tbody>
                                                                    </table>

                                                                </div>
                                                                <h4 *ngIf="this.TestProfiles[0]==null">No Data Available, Please Select Collection Center </h4>

                                                            </div>
                                                            <div class="row ml-1 mr-1   ">
                                                                <mat-form-field class="col-md-9 h-25">
                                                                    <mat-label>Quick Search</mat-label>
                                                                    <input matInput (input)="SearchTestValueChanegd($event.target.value)" [formControl]="SearchListProfiles">
                                                                </mat-form-field>

                                                            </div>
                                                        </mat-tab>

                                                        <mat-tab label="Cardio">
                                                            <div class="demo-tab-content">
                                                                <div *ngIf="this.TestCardio[0]!=null" class="table table-responsive">
                                                                    <table class="table ">
                                                                        <thead>
                                                                            <tr>
                                                                                <th class="font-weight-bold align-text-top" scope="col " style="width: 60px;">Select</th>
                                                                                <th class="font-weight-bold align-text-top" scope="col ">
                                                                                    Test Name
                                                                                </th>
                                                                                <th class="font-weight-bold align-text-top" scope="col " style="width: 160px; padding: 0px;">
                                                                                    Rate
                                                                                </th>
                                                                                <!-- <th class="font-weight-bold align-text-top"
                                                                                scope="col ">
                                                                                Basic Rate
                                                                            </th>
                                                                            <th class="font-weight-bold align-text-top" scope="col ">
                                                                                Discount
                                                                            </th> -->
                                                                            </tr>
                                                                        </thead>
                                                                        <tbody>
                                                                            <tr *ngFor="let test of TestCardio">

                                                                                <th style="width: 60px;">
                                                                                    <label class="checkbox">
                                                                                    <input type="checkbox"
                                                                                        [ngModelOptions]="{standalone: true}"
                                                                                        [name]="test.Checked"
                                                                                        [(ngModel)]="test.SpecialTest"
                                                                                        (change)="onCheckBoxChange(test,$event.target.checked)">
                                                                                    <span
                                                                                        style="margin-right: 5px;"></span>
                                                                                </label>
                                                                                </th>
                                                                                <th>{{ test?.TESTMST_Name }}</th>


                                                                                <th style="width: 160px;">
                                                                                    <!-- <input value="{{test?.TestRate}}"
                                                                                        (input)="ChangeTextBoxTestRate(test,$event.target.value)"
                                                                                        type="text"
                                                                                        class="form-control-sm form-control" /> -->
                                                                                    {{test?.TestRate}}
                                                                                </th>
                                                                                <!-- <th>
                                                                                 <input value="{{test?.BaseRate}}"
                                                                                        (input)="ChangeTextBoxBaseRate(test,$event.target.value)"
                                                                                        type="text"
                                                                                        class="form-control-sm form-control" />  
                                                                                {{test?.BaseRate}}
                                                                            </th>
                                                                            <th>
                                                                                  <input value="{{test?.Discount}}"
                                                                                        (input)="ChangeTextBoxDiscount(test,$event.target.value)"
                                                                                        type="text"
                                                                                        class="form-control-sm form-control" /> 
                                                                                {{test?.Discount}}
                                                                            </th> -->
                                                                            </tr>
                                                                        </tbody>
                                                                    </table>

                                                                </div>
                                                                <h4 *ngIf="this.TestCardio[0]==null">No Data Available, Please Select Collection Center </h4>

                                                            </div>
                                                            <div class="row ml-1 mr-1   ">
                                                                <mat-form-field class="col-md-9 h-25">
                                                                    <mat-label>Quick Search</mat-label>
                                                                    <input matInput (input)="SearchTestValueChanegd($event.target.value)" [formControl]="SearchListCardio">
                                                                </mat-form-field>

                                                            </div>
                                                        </mat-tab>
                                                        <mat-tab label="Color Dopler">
                                                            <div class="demo-tab-content">
                                                                <div *ngIf="this.TestColourDopler[0]!=null" class="table table-responsive">
                                                                    <table class="table ">
                                                                        <thead>
                                                                            <tr>
                                                                                <th class="font-weight-bold align-text-top" scope="col " style="width: 60px;">Select</th>
                                                                                <th class="font-weight-bold align-text-top" scope="col ">
                                                                                    Test Name
                                                                                </th>
                                                                                <th class="font-weight-bold align-text-top" scope="col " style="width: 160px; padding: 0px;">
                                                                                    Rate
                                                                                </th>
                                                                                <!-- <th class="font-weight-bold align-text-top"
                                                                                scope="col ">
                                                                                Basic Rate
                                                                            </th>
                                                                            <th class="font-weight-bold align-text-top" scope="col ">
                                                                                Discount
                                                                            </th> -->
                                                                            </tr>
                                                                        </thead>
                                                                        <tbody>
                                                                            <tr *ngFor="let test of TestColourDopler">

                                                                                <th style="width: 60px;">
                                                                                    <label class="checkbox">
                                                                                    <input type="checkbox"
                                                                                        [ngModelOptions]="{standalone: true}"
                                                                                        [name]="test.Checked"
                                                                                        [(ngModel)]="test.SpecialTest"
                                                                                        (change)="onCheckBoxChange(test,$event.target.checked)">
                                                                                    <span
                                                                                        style="margin-right: 5px;"></span>
                                                                                </label>
                                                                                </th>
                                                                                <th>{{ test?.TESTMST_Name }}</th>


                                                                                <th style="width: 160px;">
                                                                                    <!-- <input value="{{test?.TestRate}}"
                                                                                        (input)="ChangeTextBoxTestRate(test,$event.target.value)"
                                                                                        type="text"
                                                                                        class="form-control-sm form-control" /> -->
                                                                                    {{test?.TestRate}}
                                                                                </th>
                                                                                <!-- <th>
                                                                                 <input value="{{test?.BaseRate}}"
                                                                                        (input)="ChangeTextBoxBaseRate(test,$event.target.value)"
                                                                                        type="text"
                                                                                        class="form-control-sm form-control" />  
                                                                                {{test?.BaseRate}}
                                                                            </th>
                                                                            <th>
                                                                                  <input value="{{test?.Discount}}"
                                                                                        (input)="ChangeTextBoxDiscount(test,$event.target.value)"
                                                                                        type="text"
                                                                                        class="form-control-sm form-control" /> 
                                                                                {{test?.Discount}}
                                                                            </th> -->
                                                                            </tr>
                                                                        </tbody>
                                                                    </table>

                                                                </div>
                                                                <h4 *ngIf="this.TestColourDopler[0]==null">No Data Available, Please Select Collection Center </h4>

                                                            </div>
                                                            <div class="row ml-1 mr-1   ">
                                                                <mat-form-field class="col-md-9 h-25">
                                                                    <mat-label>Quick Search</mat-label>
                                                                    <input matInput (input)="SearchTestValueChanegd($event.target.value)" [formControl]="SearchListDopler">
                                                                </mat-form-field>

                                                            </div>
                                                        </mat-tab>
                                                        <mat-tab label="Poly Clinic">
                                                            <div class="demo-tab-content">
                                                                <div *ngIf="this.TestPolyClinic[0]!=null" class="table table-responsive">
                                                                    <table class="table ">
                                                                        <thead>
                                                                            <tr>
                                                                                <th class="font-weight-bold align-text-top" scope="col " style="width: 60px;">Select</th>
                                                                                <th class="font-weight-bold align-text-top" scope="col ">
                                                                                    Test Name
                                                                                </th>
                                                                                <th class="font-weight-bold align-text-top" scope="col " style="width: 160px; padding: 0px;">
                                                                                    Rate
                                                                                </th>
                                                                                <!-- <th class="font-weight-bold align-text-top"
                                                                                scope="col ">
                                                                                Basic Rate
                                                                            </th>
                                                                            <th class="font-weight-bold align-text-top" scope="col ">
                                                                                Discount
                                                                            </th> -->
                                                                            </tr>
                                                                        </thead>
                                                                        <tbody>
                                                                            <tr *ngFor="let test of TestPolyClinic">

                                                                                <th style="width: 60px;">
                                                                                    <label class="checkbox">
                                                                                    <input type="checkbox"
                                                                                        [ngModelOptions]="{standalone: true}"
                                                                                        [name]="test.Checked"
                                                                                        [(ngModel)]="test.SpecialTest"
                                                                                        (change)="onCheckBoxChange(test,$event.target.checked)">
                                                                                    <span
                                                                                        style="margin-right: 5px;"></span>
                                                                                </label>
                                                                                </th>
                                                                                <th>{{ test?.TESTMST_Name }}</th>


                                                                                <th style="width: 160px;">
                                                                                    <!-- <input value="{{test?.TestRate}}"
                                                                                        (input)="ChangeTextBoxTestRate(test,$event.target.value)"
                                                                                        type="text"
                                                                                        class="form-control-sm form-control" /> -->
                                                                                    {{test?.TestRate}}
                                                                                </th>
                                                                                <!-- <th>
                                                                                 <input value="{{test?.BaseRate}}"
                                                                                        (input)="ChangeTextBoxBaseRate(test,$event.target.value)"
                                                                                        type="text"
                                                                                        class="form-control-sm form-control" />  
                                                                                {{test?.BaseRate}}
                                                                            </th>
                                                                            <th>
                                                                                  <input value="{{test?.Discount}}"
                                                                                        (input)="ChangeTextBoxDiscount(test,$event.target.value)"
                                                                                        type="text"
                                                                                        class="form-control-sm form-control" /> 
                                                                                {{test?.Discount}}
                                                                            </th> -->
                                                                            </tr>
                                                                        </tbody>
                                                                    </table>

                                                                </div>
                                                                <h4 *ngIf="this.TestPolyClinic[0]==null">No Data Available, Please Select Collection Center </h4>

                                                            </div>
                                                            <div class="row ml-1 mr-1   ">
                                                                <mat-form-field class="col-md-9 h-25">
                                                                    <mat-label>Quick Search</mat-label>
                                                                    <input matInput (input)="SearchTestValueChanegd($event.target.value)" [formControl]="SearchListPolyClinic">
                                                                </mat-form-field>

                                                            </div>
                                                        </mat-tab>
                                                        <mat-tab label="Dental">
                                                            <div class="demo-tab-content">
                                                                <div *ngIf="this.TestDental[0]!=null" class="table table-responsive">
                                                                    <table class="table ">
                                                                        <thead>
                                                                            <tr>
                                                                                <th class="font-weight-bold align-text-top" scope="col " style="width: 60px;">Select</th>
                                                                                <th class="font-weight-bold align-text-top" scope="col ">
                                                                                    Test Name
                                                                                </th>
                                                                                <th class="font-weight-bold align-text-top" scope="col " style="width: 160px; padding: 0px;">
                                                                                    Rate
                                                                                </th>
                                                                                <!-- <th class="font-weight-bold align-text-top"
                                                                                scope="col ">
                                                                                Basic Rate
                                                                            </th>
                                                                            <th class="font-weight-bold align-text-top" scope="col ">
                                                                                Discount
                                                                            </th> -->
                                                                            </tr>
                                                                        </thead>
                                                                        <tbody>
                                                                            <tr *ngFor="let test of TestDental">

                                                                                <th style="width: 60px;">
                                                                                    <label class="checkbox">
                                                                                    <input type="checkbox"
                                                                                        [ngModelOptions]="{standalone: true}"
                                                                                        [name]="test.Checked"
                                                                                        [(ngModel)]="test.SpecialTest"
                                                                                        (change)="onCheckBoxChange(test,$event.target.checked)">
                                                                                    <span
                                                                                        style="margin-right: 5px;"></span>
                                                                                </label>
                                                                                </th>
                                                                                <th>{{ test?.TESTMST_Name }}</th>


                                                                                <th style="width: 160px;">
                                                                                    <!-- <input value="{{test?.TestRate}}"
                                                                                        (input)="ChangeTextBoxTestRate(test,$event.target.value)"
                                                                                        type="text"
                                                                                        class="form-control-sm form-control" /> -->
                                                                                    {{test?.TestRate}}
                                                                                </th>
                                                                                <!-- <th>
                                                                                 <input value="{{test?.BaseRate}}"
                                                                                        (input)="ChangeTextBoxBaseRate(test,$event.target.value)"
                                                                                        type="text"
                                                                                        class="form-control-sm form-control" />  
                                                                                {{test?.BaseRate}}
                                                                            </th>
                                                                            <th>
                                                                                  <input value="{{test?.Discount}}"
                                                                                        (input)="ChangeTextBoxDiscount(test,$event.target.value)"
                                                                                        type="text"
                                                                                        class="form-control-sm form-control" /> 
                                                                                {{test?.Discount}}
                                                                            </th> -->
                                                                            </tr>
                                                                        </tbody>
                                                                    </table>

                                                                </div>
                                                                <h4 *ngIf="this.TestDental[0]==null">No Data Available, Please Select Collection Center </h4>

                                                            </div>
                                                            <div class="row ml-1 mr-1 h-25">
                                                                <mat-form-field class="col-md-9 p-0 ">
                                                                    <mat-label>Quick Search</mat-label>
                                                                    <input matInput (input)="SearchTestValueChanegd($event.target.value)" [formControl]="SearchListDetal">
                                                                </mat-form-field>

                                                            </div>
                                                        </mat-tab>
                                                        <mat-tab label="Procedure">
                                                            <div class="demo-tab-content">
                                                                <div *ngIf="this.TestProcedure[0]!=null" class="table table-responsive">
                                                                    <table class="table ">
                                                                        <thead>
                                                                            <tr>
                                                                                <th class="font-weight-bold align-text-top" scope="col " style="width: 60px;">Select</th>
                                                                                <th class="font-weight-bold align-text-top" scope="col ">
                                                                                    Test Name
                                                                                </th>
                                                                                <th class="font-weight-bold align-text-top" scope="col " style="width: 160px; padding: 0px;">
                                                                                    Rate
                                                                                </th>
                                                                                <!-- <th class="font-weight-bold align-text-top"
                                                                                scope="col ">
                                                                                Basic Rate
                                                                            </th>
                                                                            <th class="font-weight-bold align-text-top" scope="col ">
                                                                                Discount
                                                                            </th> -->
                                                                            </tr>
                                                                        </thead>
                                                                        <tbody>
                                                                            <tr *ngFor="let test of TestProcedure">

                                                                                <th style="width: 60px;">
                                                                                    <label class="checkbox">
                                                                                    <input type="checkbox"
                                                                                        [ngModelOptions]="{standalone: true}"
                                                                                        [name]="test.Checked"
                                                                                        [(ngModel)]="test.SpecialTest"
                                                                                        (change)="onCheckBoxChange(test,$event.target.checked)">
                                                                                    <span
                                                                                        style="margin-right: 5px;"></span>
                                                                                </label>
                                                                                </th>
                                                                                <th>{{ test?.TESTMST_Name }}</th>


                                                                                <th style="width: 160px;">
                                                                                    <!-- <input value="{{test?.TestRate}}"
                                                                                        (input)="ChangeTextBoxTestRate(test,$event.target.value)"
                                                                                        type="text"
                                                                                        class="form-control-sm form-control" /> -->
                                                                                    {{test?.TestRate}}
                                                                                </th>
                                                                                <!-- <th>
                                                                                 <input value="{{test?.BaseRate}}"
                                                                                        (input)="ChangeTextBoxBaseRate(test,$event.target.value)"
                                                                                        type="text"
                                                                                        class="form-control-sm form-control" />  
                                                                                {{test?.BaseRate}}
                                                                            </th>
                                                                            <th>
                                                                                  <input value="{{test?.Discount}}"
                                                                                        (input)="ChangeTextBoxDiscount(test,$event.target.value)"
                                                                                        type="text"
                                                                                        class="form-control-sm form-control" /> 
                                                                                {{test?.Discount}}
                                                                            </th> -->
                                                                            </tr>
                                                                        </tbody>
                                                                    </table>

                                                                </div>
                                                                <h4 *ngIf="this.TestProcedure[0]==null">No Data Available, Please Select Collection Center </h4>

                                                            </div>
                                                            <div class="row ml-1 mr-1 h-25">
                                                                <mat-form-field class="col-md-9  ">
                                                                    <mat-label>Quick Search</mat-label>
                                                                    <input matInput (input)="SearchTestValueChanegd($event.target.value)" [formControl]="SearchListProcedure">
                                                                </mat-form-field>

                                                            </div>
                                                        </mat-tab>
                                                    </mat-tab-group>
                                                </mat-card-content>
                                            </mat-card>

                                        </div>
                                        <div class="form-group ml-3 mt-3">

                                            <button (click)="onSubmit('Save')" class="btn btn-primary btn-sm mr-2">Save</button>
                                            <button (click)="onSubmit('Save & New')" class="btn btn-primary btn-sm mr-2">Save & New</button>
                                            <button (click)="onSubmit('PrintBill')" class="btn btn-primary btn-sm mr-2">Save & New & Print Bill</button>
                                            <button (click)="onSubmit('PrintBarcode')" class="btn btn-primary btn-sm mr-2">Save & New & Print Bill & Print Barcode</button>
                                            <button (click)="onCancle()" class="btn btn-primary btn-sm mr-2">Cancel</button>
                                        </div>



                                    </div>


                                    <div class="col-md-4 p-0">
                                        <div class="form-group border pl-2 h-25">

                                            <mat-form-field appearance="fill" class="col-md-8 pb-0 h-25">
                                                <mat-label>Get Test By Search</mat-label>
                                                <input type="text" style="padding: 0px;" placeholder="Get Test By Search" matInput [formControl]="AllTestSearch" [matAutocomplete]="AllTest">
                                                <mat-autocomplete (optionSelected)="SelectedTestFromAllTestSearch($event.option.value)" #AllTest="matAutocomplete">
                                                    <mat-option *ngFor="let option of AllTestList | async " [value]="option.TESTMST_Name">
                                                        <div class=" row p-4" style="padding: 0px;">
                                                            {{option.TESTMST_Name}}

                                                        </div>
                                                    </mat-option>
                                                </mat-autocomplete>
                                            </mat-form-field>
                                            <label class="col-md-4 "> Test Count:
                                                {{InsertedTestList.length}}</label>
                                            <div class="row " style="overflow: auto; overflow-x: hidden;">

                                                <diV class="testList">
                                                    <div *ngFor="let test of InsertedTestList ;index as i">
                                                        <div class="row pl-2" *ngIf="this.test.SpecialTest==true">
                                                            {{i+1}} - {{test?.TESTMST_Name}} ({{test?.TestRate}})
                                                            <a (click)="onCheckBoxChange(test,false)" class="btn btn-sm">
                                                                <mat-icon>delete</mat-icon>
                                                            </a>
                                                        </div>
                                                    </div>
                                                </diV>

                                            </div>

                                        </div>
                                        <mat-form-field appearance="fill" class="col-md-12 border">
                                            <mat-label>Remark</mat-label>
                                             <!-- <input matInput formControlName="PATIENT_Email"> -->

                                             <textarea type="text" matInput formControlName="Remarks" class="form-input-field"  ></textarea>
                                            
                                           
                                        </mat-form-field>

                                        <div class="border">
                                            <div class="border p-2"><b>Payment Details</b> </div>
                                            <div>

                                                <div class="form-group p-1" style="padding: 10px !important;">
                                                    <div class="row">
                                                        <label class="col-md-5 col-form-label">Payment Mode
                                                        </label>
                                                        <div class="col-md-4">
                                                            <mat-select formControlName="DropPaymentMode">
                                                                <mat-option *ngFor="let option of paymetModeList" [value]="option.Id">
                                                                    {{option.PaymentMode}}
                                                                </mat-option>
                                                            </mat-select>
                                                        </div>
                                                        <div class="col-md-2">
                                                            <button class="btn btn-primary btn-sm " (click)="openModal()">Add New</button>
                                                        </div>
                                                    </div>
                                                    <div class="row">
                                                        <label class="col-md-5 col-form-label">Total Amount
                                                        </label>
                                                        <div class="col-md-6" style="padding-left: 3px;">
                                                            <input value="{{this.TotalAmount}}" class="form-control-sm form-control" type="text" disabled />
                                                        </div>
                                                    </div>
                                                    <div class="row">
                                                        <label class="col-md-5 col-form-label">Emergency
                                                        Charges</label>
                                                        <div class="col-md-7">
                                                            <div class="row">
                                                                <input placeholder="%" (input)="onAmountTextBoxChange('EmergencyChargesPercentage',$event,'External')" [ngModelOptions]="{standalone: true}" [ngModel]="EmergencyChargesPercentage" class="form-control-sm col-md-3  ml-3 form-control" />
                                                                <input placeholder="Amount" (input)="onAmountTextBoxChange('EmergencyChargesAmount',$event,'External')" [ngModelOptions]="{standalone: true}" [ngModel]="EmergencyChargesAmount" class="form-control-sm col-md-7 ml-3 form-control" />
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="row">
                                                        <label class="col-md-5 col-form-label">Concession</label>
                                                        <div class="col-md-7">

                                                            <div class="row">
                                                                <input placeholder="%" (input)="onAmountTextBoxChange('ConcessionPercentage',$event,'External')" [ngModelOptions]="{standalone: true}" [ngModel]="ConcessionPercentage" class="form-control-sm col-md-3  ml-3 form-control" />
                                                                <input placeholder="Amount" (input)="onAmountTextBoxChange('ConcessionAmount',$event,'External')" [ngModelOptions]="{standalone: true}" [ngModel]="ConcessionAmount" class="form-control-sm col-md-7 ml-3 form-control" />
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="row">
                                                        <label class="col-md-5 b col-form-label">Bill
                                                        Amount</label>
                                                        <div class="col-md-7">
                                                            <b>
                                                                {{this.BillAmount}}

                                                            </b>
                                                        </div>
                                                    </div>
                                                    <div class="row">
                                                        <label class="col-md-5 col-form-label">Amount
                                                        Paid</label>
                                                        <div class="col-md-5" style="padding-left: 6px;">
                                                            <input class="form-control-sm form-control" (input)="onAmountTextBoxChange('AmountPaidInCash',$event,'External')" [ngModelOptions]="{standalone: true}" [ngModel]="AmountPaidInCash" type="text" />
                                                        </div>
                                                        <!--  -->
                                                    </div>
                                                    <div class="row">
                                                        <label class="col-md-5 col-form-label">Balance Amount</label>
                                                        <div class="col-md-7">
                                                            {{this.BalanceAmount}}
                                                        </div>
                                                    </div>

                                                </div>
                                            </div>
                                        </div>




                                    </div>



                                </div>

                            </mat-tab>
                            <!--Patient Details end-->

                            <!--Hospitalization Details start-->
                            <mat-tab label="Hospitalization Details">
                                <div class="col-md-12" style=" padding-left: 13px;">
                                    <div class="row">


                                        <div class="col-md-4">
                                            <mat-label>ward No</mat-label>
                                            <!-- <mat-form-field class="form-group"> -->
                                            <input class="bot-border" placeholder="Ward No" matInput formControlName="WardNo">
                                            <!-- </mat-form-field> -->

                                        </div>

                                        <div class="col-md-4">
                                            <!-- <mat-form-field class="form-group"> -->
                                            <mat-label>OPD / IPD</mat-label>
                                            <mat-select formControlName="HOSPTYPE" class="bot-border">
                                                <mat-option [value]="'OPD'">
                                                    OPD
                                                </mat-option>
                                                <mat-option [value]="'IPD'">
                                                    IPD
                                                </mat-option>
                                                <mat-option [value]="'OUTSIDE'">
                                                    OUTSIDE
                                                </mat-option>
                                            </mat-select>
                                            <!-- </mat-form-field> -->
                                        </div>


                                        <div class="col-md-3">
                                            <mat-label>Email1</mat-label>
                                            <!-- <mat-form-field class="form-group"> -->
                                            <input type="text" placeholder="Email1" matInput formControlName="Email1" class="bot-border" pattern="[a-zA-Z0-9.-_]{1,}@[a-zA-Z.-]{2,}[.]{1}[a-zA-Z]{2,}">
                                            
                                            <mat-error *ngIf="Patient.get('Email1').hasError('required')">Email is required</mat-error>
                                            <mat-error *ngIf="Patient.get('Email1').hasError('email')">Please enter a valid email address</mat-error> 
                                            <!-- </mat-form-field> -->

                                        </div>
                                        <div class="col-md-3">
                                            <mat-label>Email2</mat-label>
                                            <!-- <mat-form-field class="form-group"> -->
                                            <input  type="text" placeholder="Email2" matInput formControlName="Email2" class="bot-border" pattern="[a-zA-Z0-9.-_]{1,}@[a-zA-Z.-]{2,}[.]{1}[a-zA-Z]{2,}">
                                            <mat-error *ngIf="Patient.get('Email2').hasError('required')">Email is required</mat-error>
                                            <mat-error *ngIf="Patient.get('Email2').hasError('email')">Please enter a valid email address</mat-error>
                                            <!-- </mat-form-field> -->

                                        </div>
                                        <div class="col-md-3">
                                            <mat-label>Mobile No.1</mat-label>
                                            <!-- <mat-form-field class="form-group"> -->
                                            <input minlength="10" maxlength="10"  class="bot-border" placeholder="Mobile1" (keypress)="($event.charCode >= 48 && $event.charCode <= 58)" matInput formControlName="Mobile1">
                                            <!-- </mat-form-field> -->

                                        </div>

                                        <div class="col-md-3">
                                            <mat-label>Mobile No.2</mat-label>
                                            <!-- <mat-form-field class="form-group"> -->
                                            <input minlength="10" maxlength="10"  class="bot-border" placeholder="Mobile2" (keypress)="($event.charCode >= 48 && $event.charCode <= 58)" matInput formControlName="Mobile2">
                                            <!-- </mat-form-field> -->

                                        </div>
                                        <div class="col-md-12">
                                            <mat-label>Remark</mat-label>

                                            <textarea class="bot-border" placeholder="Remark" rows="3" matInput formControlName="HospitalizeRemark"></textarea>

                                        </div>

                                    </div>

                                </div>

                                <div class="form-group ml-3 mt-5">

                                    <button (click)="moveToSelectedTab('Patient Details')" class="btn btn-primary mr-2">Back to patient Details</button>
                                </div>
                            </mat-tab>
                            <!--Hospitalization Details end-->

                            <!--Residential Address start-->
                            <mat-tab label="Residential Address">
                                <div style=" padding-left: 13px;">
                                    <mat-form-field class="col-md-6">
                                        <mat-label>Address 1</mat-label>
                                        <textarea matInput cdkTextareaAutosize cdkAutosizeMinRows="3" formControlName="PATIENT_Address1" cdkAutosizeMaxRows="5"></textarea>
                                    </mat-form-field>
                                    <mat-form-field class="col-md-6">
                                        <mat-label>Address 2</mat-label>
                                        <textarea matInput cdkTextareaAutosize cdkAutosizeMinRows="3" formControlName="PATIENT_Address2" cdkAutosizeMaxRows="5"></textarea>
                                    </mat-form-field>
                                    <mat-form-field class="col-md-4">
                                        <input type="text" matInput formControlName="Area" placeholder="Area">
                                    </mat-form-field>
                                    <mat-form-field class="col-md-4">
                                        <input type="text" minlength="6" maxlength="6"  (keypress)="($event.charCode >= 48 && $event.charCode <= 58)" matInput formControlName="Pincode" placeholder="Pincode">
                                    </mat-form-field>
                                    <mat-form-field class="col-md-4">
                                        <input type="text" matInput formControlName="City" placeholder="City">
                                    </mat-form-field>
                                    <mat-form-field class="col-md-4">
                                        <input type="text" matInput formControlName="State" placeholder="State">
                                    </mat-form-field>
                                    <mat-form-field class="col-md-4">
                                        <input type="text" matInput formControlName="PATIENT_Country" placeholder="Country">
                                    </mat-form-field>
                                    <mat-form-field class="col-md-4">
                                        <input type="text" minlength="10" maxlength="10"  (keypress)="($event.charCode >= 48 && $event.charCode <= 58)" matInput formControlName="TelephoneNo" placeholder="Telephone Number">
                                    </mat-form-field>



                                    <!-- <div class="form-group row">
                                    <label class="col-md-3 ">City </label>
                                    <br />
                                    <input formControlName="PatientDOB" type="text" class="form-control-sm col-md-8 form-control" />
                                </div>
                                <div class="form-group row">

                                    <label class="col-md-3 ">State </label>
                                    <br />
                                    <input formControlName="PatientDOB" type="text"
                                        class="form-control-sm col-md-8 form-control" />
                                </div> -->
                                    <!-- <div class="form-group row">

                                    <div class="col-md-4  col-lg-4">
                                        <div class="row">
                                            <label class="col-md-3 ">Pin Code </label>
                                            <br />
                                            <input formControlName="PatientDOB" type="text" class="form-control-sm col-md-8 form-control" />
                                        </div>
                                    </div>


                                </div> -->
                                    <div class="form-group ml-6 pt-2 pb-3 row">
                                        <button (click)="moveToSelectedTab('Patient Details')" class="btn btn-primary mr-2">Back to patient Details</button>
                                    </div>
                                </div>
                            </mat-tab>
                            <!--Residential Address end-->
                        </mat-tab-group>
                    </mat-card-content>
                </mat-card>

                <!--popup start-->
                <jw-modal id="custom-modal-1">

                    <div class="col-12 jw-model-heder">
                        <h4>
                            Other Payment Mode
                        </h4>


                    </div>
                    <div>

                        <div class="row">
                            <h4 class="col-5 h4-tit">Payment Mode</h4>
                            <input input="text" formControlName="txtPaymentMode" class=" form-control col-6">
                        </div>


                    </div>
                    <div class="row  mt-4">
                        <a (click)="savePaymentMode();" class="btn btn-brand mr-2 btn-sm bot-sm">Save</a>


                        <a (click)="closeModal();" class="btn btn-brand mr-2  btn-sm bot-sm">Close</a>
                    </div>
                </jw-modal>
                <!--popup end-->

                <!-- <jw-modal id="custom-modal-2">
                    <div class="col-12 jw-model-heder">
                        <h4>
                             {{AlertMessage}}"
                        </h4>
                    </div>
                    <div class="row  mt-4">
                        <a (click)="OK()" class="btn btn-brand mr-2 btn-sm bot-sm">OK</a>
                    </div>
                </jw-modal> -->

            </form>
        </div>
    </div>
</div>